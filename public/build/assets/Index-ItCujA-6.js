import{r as d,j as e,Y as G,a as Y,y as H,b as J}from"./app-LmwgqGlp.js";import{A as W}from"./AdminAuthenticated-B_9cLrZ9.js";import{P as b}from"./PermissionAllow-ClFyzIqP.js";import{T as K}from"./Tab-CX_o5KWA.js";import{T as X}from"./Tabs-B_uZLQlL.js";import{M as Z}from"./ModalPopup-BkMS-JYW.js";import ee from"./ViewSeller-BHNPMav2.js";import{d as l}from"./index-BrO-Zkbu.js";/* empty css                                  */import{S as se}from"./sweetalert2.all-r-PN9iqk.js";import{P as ae}from"./Pagination-CTjVH0B4.js";import"./Dropdown-O7hYxai5.js";import"./AdminHeader-sEXnb3em.js";import"./Dropdown-CAPARNVK.js";import"./listen-Du43TVfb.js";import"./useWindow-2ngI0KSK.js";import"./Anchor-CvylGWc_.js";import"./extends-CCbyfPlC.js";import"./objectWithoutPropertiesLoose-DXrfETLX.js";import"./index-VyUb-WXE.js";import"./BootstrapModalManager-DA6uoED0.js";import"./Fade-t8whb-5c.js";import"./inheritsLoose-1HkgTRWY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./index-BS5IyV9F.js";import"./ToastNotification-v1pivg4b.js";import"./ReactToastify-MGIPp6tX.js";import"./TabPane-C91VPFHG.js";import"./ElementChildren-pi8xeKRz.js";import"./Modal-CNmcdX1k.js";import"./slick-theme-CT-eHBfn.js";import"./StatusBtn-SeK3hZSi.js";import"./DynamicSelect-DBboznCT.js";import"./react-select.esm-Q9g1V6gH.js";import"./Select-49a62830.esm-D48Vcish.js";import"./objectSpread2-fZMFotU9.js";import"./defineProperty-C77ibxUe.js";import"./extends-CJoT7KlQ.js";import"./emotion-react.browser.esm-CV-j5Toa.js";import"./hoist-non-react-statics.cjs-Cx9fBeMR.js";import"./interopRequireDefault-BbjLfwJi.js";import"./objectWithoutPropertiesLoose-DN910g8V.js";function $e({vendorsList:r,pendingVendorsList:u,suspendedVendorsList:g,auth:C}){const[j,f]=d.useState(1),[o,N]=d.useState(""),[T,y]=d.useState("all"),[t,S]=d.useState(r.data),[w,M]=d.useState(u.data),[z,Q]=d.useState(g.data),[n,O]=d.useState("ApprovedSellers"),[R,P]=d.useState(!1),[U,$]=d.useState(null),A=c=>{se.fire({title:"Are you sure you want to delete the Seller?",text:" Once deleted, it cannot be recovered.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&H.delete(route("admin.sellers.destroy",c.id))})},_=(c,s)=>{f(s),window.scrollTo(0,0)},v=c=>{const s=c.target.value;N(s);let i;n==="ApprovedSellers"?(i=r.data.filter(a=>{var m,p,h,x;return((m=a.company_name)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))||((p=a.full_name)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))||((h=a.email)==null?void 0:h.toLowerCase().includes(s.toLowerCase()))||((x=a.phone)==null?void 0:x.toLowerCase().includes(s.toLowerCase()))}),S(i)):n==="PendingApproval"?(i=u.data.filter(a=>{var m,p,h,x;return((m=a.company_name)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))||((p=a.full_name)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))||((h=a.email)==null?void 0:h.toLowerCase().includes(s.toLowerCase()))||((x=a.phone)==null?void 0:x.toLowerCase().includes(s.toLowerCase()))}),M(i)):n==="SuspendedSellers"&&(i=g.data.filter(a=>{var m,p,h,x;return((m=a.company_name)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))||((p=a.full_name)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))||((h=a.email)==null?void 0:h.toLowerCase().includes(s.toLowerCase()))||((x=a.phone)==null?void 0:x.toLowerCase().includes(s.toLowerCase()))}),Q(i)),f(1)},L=c=>{const s=c.target.value;y(s);let i;n==="ApprovedSellers"?(s=="agent"?i=r.data.filter(a=>a.is_agent===!0):s=="individual"?i=r.data.filter(a=>a.is_agent==!1):i=r.data,S(i)):n==="PendingApproval"?(s=="agent"?i=r.data.filter(a=>a.is_agent==!0):s=="individual"?i=r.data.filter(a=>a.is_agent==!1):i=r.data,M(i)):n==="SuspendedSellers"&&(s=="agent"?i=r.data.filter(a=>a.is_agent==!0):s=="individual"?i=r.data.filter(a=>a.is_agent==!1):i=r.data,Q(i)),f(1)},D=(()=>{if(o.length>0||T.length>0){if(n==="ApprovedSellers")return t;if(n==="PendingApproval")return w;if(n==="SuspendedSellers")return z}else{if(n==="ApprovedSellers")return r.data;if(n==="PendingApproval")return u.data;if(n==="SuspendedSellers")return g.data}})(),k=(j-1)*20,E=j*20,V=()=>P(!1),F=async c=>{try{const i=(await J.get(route("admin.sellers.show",c.id))).data;$(i),P(!0)}catch(s){console.error("Error fetching data",s)}},q=()=>{P(!1)};return e.jsxs(W,{user:C.user,children:[e.jsx(G,{title:"Users List"}),e.jsx("div",{className:"content-wrapper me-4",children:e.jsxs("div",{className:"container-full",children:[e.jsx("div",{className:"content-header",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("div",{className:"me-auto",children:e.jsx("h4",{className:"page-title",children:"Users Listing"})})})}),e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"text-end",children:e.jsx(b,{permission:"Seller Create",children:e.jsxs(Y,{className:"btn btn-info text-end",href:route("admin.sellers.create"),children:[e.jsx("i",{className:"bi bi-plus"})," Create"]})})})})]})}),e.jsxs(X,{id:"uncontrolled-tab-example",activeKey:n,onSelect:c=>O(c),className:"",children:[e.jsx(K,{eventKey:"ApprovedSellers",title:"Active Users",children:e.jsx(B,{displayList:D,startIdx:k,endIdx:E,deleteVendor:A,handlePageChange:_,currentPage:j,itemsPerPage:20,handleShow:F,searchQuery:o,handleSearch:v,handleSearchType:L})}),e.jsx(K,{eventKey:"SuspendedSellers",title:"Suspended",children:e.jsx(B,{displayList:D,startIdx:k,endIdx:E,deleteVendor:A,handlePageChange:_,currentPage:j,itemsPerPage:20,handleShow:F,searchQuery:o,handleSearch:v,handleSearchType:L})}),e.jsx(K,{eventKey:"PendingApproval",title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Unverified"}),u.data.length>0&&e.jsx("span",{className:"pending-approval-count",children:u.data.length})]}),children:e.jsx(B,{displayList:D,startIdx:k,endIdx:E,deleteVendor:A,handlePageChange:_,currentPage:j,itemsPerPage:20,handleShow:F,searchQuery:o,handleSearch:v,handleSearchType:L})})]})]})}),e.jsx(Z,{show:R,handleClose:V,size:"md",title:"Seller Details",children:U?e.jsx(ee,{collection:U,handleClose:V,onSubmit:q}):"Failed fetching data..."})]})}const B=({displayList:r,startIdx:u,endIdx:g,deleteVendor:C,handlePageChange:I,currentPage:j,itemsPerPage:f,handleShow:o,searchQuery:N,handleSearch:T,handleSearchType:y})=>e.jsx("section",{className:"content2",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"box",children:e.jsx("div",{className:"box-body",children:e.jsxs(b,{permission:"Categories Listing",message:"true",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"mb-3 col-lg-4",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name,company name,phone or email",value:N,onChange:T})}),e.jsx("div",{className:"mb-3 col-lg-2",children:e.jsxs("select",{name:"",className:"form-control",onChange:y,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"agent",children:"Agent"}),e.jsx("option",{value:"individual",children:"Individual"})]})})]}),e.jsx("div",{className:"table-responsive rounded card-table",children:e.jsxs(l.Table,{className:"table border-no",id:"example1",children:[e.jsx(l.Thead,{children:e.jsxs(l.Tr,{children:[e.jsx(l.Th,{children:"Full Name"}),e.jsx(l.Th,{children:"Email"}),e.jsx(l.Th,{children:"Mobile Number"}),e.jsx(l.Th,{children:"Designation"}),e.jsx(l.Th,{children:"Subscription"}),e.jsx(l.Th,{children:"Ads"}),e.jsx(l.Th,{children:"Started at"}),e.jsx(l.Th,{children:"Last login"}),e.jsx(l.Th,{className:"text-end"})]})}),e.jsx(l.Tbody,{children:r.slice(u,g).map(t=>{var S;return e.jsxs(l.Tr,{className:"hover-primary",children:[e.jsxs(l.Td,{valign:"middle",className:"d-flex",onClick:()=>o(t),children:[e.jsx("img",{src:t.picture,className:"w-30 h-30 me-3 rounded-circle",alt:`${t.picture} icon`,onError:w=>{w.target.onerror=null,w.target.src="/assets/admin/images/noimage.webp"}}),e.jsxs("div",{children:[t.company_name!=""&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-fw-bold",children:t.company_name}),e.jsx("br",{})]}),e.jsx("i",{children:t.full_name})]})]}),e.jsx(l.Td,{onClick:()=>o(t),valign:"middle",children:t.email}),e.jsx(l.Td,{onClick:()=>o(t),valign:"middle",children:t.phone}),e.jsx(l.Td,{onClick:()=>o(t),valign:"middle",children:t.designation}),e.jsx(l.Td,{children:(S=t.current_subscription)==null?void 0:S.name}),e.jsx(l.Td,{children:t.ads.length}),e.jsx(l.Td,{children:window.formatDateTime(t.created_at)}),e.jsx(l.Td,{children:t.last_login!=null&&window.formatDateTime(t.last_login)}),e.jsxs(l.Td,{className:"text-end",children:[e.jsx(b,{permission:"Seller Show",children:e.jsx("span",{onClick:()=>o(t),className:"btn btn-transparent",children:e.jsx("i",{className:"bi bi-eye"})})}),e.jsx(b,{permission:"Seller Edit",children:e.jsx(Y,{className:"btn btn-transparent",href:route("admin.sellers.edit",t.id),children:e.jsx("i",{className:"bi bi-pencil"})})}),e.jsx(b,{permission:"Seller Edit",children:e.jsx("button",{onClick:()=>C(t),className:"btn btn-transparent border-0",children:e.jsx("i",{className:"bi bi-trash"})})})]})]},t.id)})})]})}),r.length>f&&e.jsx("div",{className:"pagination-container float-end py-5",children:e.jsx(ae,{count:Math.ceil(r.length/f),page:j,onChange:I})})]})})})})})});export{$e as default};
