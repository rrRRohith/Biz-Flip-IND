import{r as h,j as e,Y as O,a as K,y as R,b as $}from"./app-CMZ_Jftk.js";import{A as q}from"./AdminAuthenticated-DyLmeZmf.js";import{P as C}from"./PermissionAllow-j33LQi-R.js";import{T as D}from"./Tab-z-zZW-8H.js";import{T as G}from"./Tabs-BoM5Puzs.js";import{M as J}from"./ModalPopup-BNVsywei.js";import W from"./ViewSeller-BNgCol_V.js";import{d as a}from"./index-Bil9l9Ng.js";/* empty css                                  */import{S as X}from"./sweetalert2.all-CUdhoGA_.js";import{P as Z}from"./Pagination-E18vEFRv.js";import"./Dropdown-BRybx7MY.js";import"./AdminHeader-DyXivJeb.js";import"./Dropdown-DjY1lKQQ.js";import"./listen-CyJkniqF.js";import"./useWindow-DRS_L9V5.js";import"./Anchor-TWl2GEUF.js";import"./extends-CCbyfPlC.js";import"./objectWithoutPropertiesLoose-DXrfETLX.js";import"./index-6MmTKF-3.js";import"./BootstrapModalManager-B434Rx0U.js";import"./Fade-BQB-P2l-.js";import"./inheritsLoose-1HkgTRWY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./index-D6YjL9Vk.js";import"./ToastNotification-R6sh_oh3.js";import"./ReactToastify-lr-S0sR2.js";import"./TabPane-B-f_If47.js";import"./ElementChildren-B6xANdLv.js";import"./Modal-DlVrXcJi.js";import"./slick-theme-ChQaextH.js";import"./StatusBtn-BnlgRy0F.js";import"./DynamicSelect-BmFbwFbz.js";import"./react-select.esm-C_5nf0sa.js";import"./Select-49a62830.esm-DwWt1p4_.js";import"./objectSpread2-fZMFotU9.js";import"./defineProperty-C77ibxUe.js";import"./extends-CJoT7KlQ.js";import"./emotion-react.browser.esm-BlrL0iUS.js";import"./hoist-non-react-statics.cjs-BK6v3qHn.js";import"./interopRequireDefault-BbjLfwJi.js";import"./objectWithoutPropertiesLoose-DN910g8V.js";function ze({vendorsList:x,pendingVendorsList:u,suspendedVendorsList:g,auth:w}){const[j,f]=h.useState(1),[i,N]=h.useState(""),[S,s]=h.useState(x.data),[b,B]=h.useState(u.data),[V,Q]=h.useState(g.data),[r,U]=h.useState("ApprovedSellers"),[Y,y]=h.useState(!1),[I,z]=h.useState(null),T=n=>{X.fire({title:"Are you sure you want to delete the Seller?",text:" Once deleted, it cannot be recovered.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&R.delete(route("admin.sellers.destroy",n.id))})},P=(n,t)=>{f(t),window.scrollTo(0,0)},v=n=>{const t=n.target.value;N(t);let o;r==="ApprovedSellers"?(o=x.data.filter(l=>{var c,d,m,p;return((c=l.company_name)==null?void 0:c.toLowerCase().includes(t.toLowerCase()))||((d=l.full_name)==null?void 0:d.toLowerCase().includes(t.toLowerCase()))||((m=l.email)==null?void 0:m.toLowerCase().includes(t.toLowerCase()))||((p=l.phone)==null?void 0:p.toLowerCase().includes(t.toLowerCase()))}),s(o)):r==="PendingApproval"?(o=u.data.filter(l=>{var c,d,m,p;return((c=l.company_name)==null?void 0:c.toLowerCase().includes(t.toLowerCase()))||((d=l.full_name)==null?void 0:d.toLowerCase().includes(t.toLowerCase()))||((m=l.email)==null?void 0:m.toLowerCase().includes(t.toLowerCase()))||((p=l.phone)==null?void 0:p.toLowerCase().includes(t.toLowerCase()))}),B(o)):r==="SuspendedSellers"&&(o=g.data.filter(l=>{var c,d,m,p;return((c=l.company_name)==null?void 0:c.toLowerCase().includes(t.toLowerCase()))||((d=l.full_name)==null?void 0:d.toLowerCase().includes(t.toLowerCase()))||((m=l.email)==null?void 0:m.toLowerCase().includes(t.toLowerCase()))||((p=l.phone)==null?void 0:p.toLowerCase().includes(t.toLowerCase()))}),Q(o)),f(1)},L=(()=>{if(i.length>0){if(r==="ApprovedSellers")return S;if(r==="PendingApproval")return b;if(r==="SuspendedSellers")return V}else{if(r==="ApprovedSellers")return x.data;if(r==="PendingApproval")return u.data;if(r==="SuspendedSellers")return g.data}})(),A=(j-1)*20,_=j*20,M=()=>y(!1),k=async n=>{try{const o=(await $.get(route("admin.sellers.show",n.id))).data;z(o),y(!0)}catch(t){console.error("Error fetching data",t)}},H=()=>{y(!1)};return e.jsxs(q,{user:w.user,children:[e.jsx(O,{title:"Sellers List"}),e.jsx("div",{className:"content-wrapper me-4",children:e.jsxs("div",{className:"container-full",children:[e.jsx("div",{className:"content-header",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("div",{className:"me-auto",children:e.jsx("h4",{className:"page-title",children:"Sellers Listing"})})})}),e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"text-end",children:e.jsx(C,{permission:"Seller Create",children:e.jsxs(K,{className:"btn btn-info text-end",href:route("admin.sellers.create"),children:[e.jsx("i",{className:"bi bi-plus"})," Create"]})})})})]})}),e.jsxs(G,{id:"uncontrolled-tab-example",activeKey:r,onSelect:n=>U(n),className:"",children:[e.jsx(D,{eventKey:"ApprovedSellers",title:"Approved Users",children:e.jsx(E,{displayList:L,startIdx:A,endIdx:_,deleteVendor:T,handlePageChange:P,currentPage:j,itemsPerPage:20,handleShow:k,searchQuery:i,handleSearch:v})}),e.jsx(D,{eventKey:"PendingApproval",title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Pending Approval"}),u.data.length>0&&e.jsx("span",{className:"pending-approval-count",children:u.data.length})]}),children:e.jsx(E,{displayList:L,startIdx:A,endIdx:_,deleteVendor:T,handlePageChange:P,currentPage:j,itemsPerPage:20,handleShow:k,searchQuery:i,handleSearch:v})}),e.jsx(D,{eventKey:"SuspendedSellers",title:"Suspended Users",children:e.jsx(E,{displayList:L,startIdx:A,endIdx:_,deleteVendor:T,handlePageChange:P,currentPage:j,itemsPerPage:20,handleShow:k,searchQuery:i,handleSearch:v})})]})]})}),e.jsx(J,{show:Y,handleClose:M,size:"md",title:"Seller Details",children:I?e.jsx(W,{collection:I,handleClose:M,onSubmit:H}):"Failed fetching data..."})]})}const E=({displayList:x,startIdx:u,endIdx:g,deleteVendor:w,handlePageChange:F,currentPage:j,itemsPerPage:f,handleShow:i,searchQuery:N,handleSearch:S})=>e.jsx("section",{className:"content2",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"box",children:e.jsx("div",{className:"box-body",children:e.jsxs(C,{permission:"Categories Listing",message:"true",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"mb-3 col-lg-4",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name,company name,phone or email",value:N,onChange:S})}),e.jsx("div",{className:"mb-3 col-lg-2",children:e.jsxs("select",{name:"",className:"form-control",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"agent",children:"Agent"}),e.jsx("option",{value:"individual",children:"Individual"})]})})]}),e.jsx("div",{className:"table-responsive rounded card-table",children:e.jsxs(a.Table,{className:"table border-no",id:"example1",children:[e.jsx(a.Thead,{children:e.jsxs(a.Tr,{children:[e.jsx(a.Th,{children:"Full Name"}),e.jsx(a.Th,{children:"Email"}),e.jsx(a.Th,{children:"Mobile Number"}),e.jsx(a.Th,{children:"Designation"}),e.jsx(a.Th,{className:"text-center",children:"Status"}),e.jsx(a.Th,{children:"Last Modified"}),e.jsx(a.Th,{className:"text-end"})]})}),e.jsx(a.Tbody,{children:x.slice(u,g).map(s=>e.jsxs(a.Tr,{className:"hover-primary",children:[e.jsxs(a.Td,{valign:"middle",className:"d-flex",onClick:()=>i(s),children:[e.jsx("img",{src:s.picture,className:"w-30 h-30 me-3 rounded-circle",alt:`${s.picture} icon`,onError:b=>{b.target.onerror=null,b.target.src="/assets/admin/images/noimage.webp"}}),e.jsxs("div",{children:[s.company_name!=""&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-fw-bold",children:s.company_name}),e.jsx("br",{})]}),e.jsx("i",{children:s.full_name})]})]}),e.jsx(a.Td,{onClick:()=>i(s),valign:"middle",children:s.email}),e.jsx(a.Td,{onClick:()=>i(s),valign:"middle",children:s.phone}),e.jsx(a.Td,{onClick:()=>i(s),valign:"middle",children:s.designation}),e.jsx(a.Td,{onClick:()=>i(s),className:"text-center",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:window.statusIcon(s.status)}})}),e.jsx(a.Td,{onClick:()=>i(s),valign:"middle",children:window.formatDateTime(s.updated_at)}),e.jsxs(a.Td,{className:"text-end",children:[e.jsx(C,{permission:"Seller Show",children:e.jsx("span",{onClick:()=>i(s),className:"btn btn-transparent",children:e.jsx("i",{className:"bi bi-eye"})})}),e.jsx(C,{permission:"Seller Edit",children:e.jsx(K,{className:"btn btn-transparent",href:route("admin.sellers.edit",s.id),children:e.jsx("i",{className:"bi bi-pencil"})})}),e.jsx(C,{permission:"Seller Edit",children:e.jsx("button",{onClick:()=>w(s),className:"btn btn-transparent border-0",children:e.jsx("i",{className:"bi bi-trash"})})})]})]},s.id))})]})}),x.length>f&&e.jsx("div",{className:"pagination-container float-end py-5",children:e.jsx(Z,{count:Math.ceil(x.length/f),page:j,onChange:F})})]})})})})})});export{ze as default};
