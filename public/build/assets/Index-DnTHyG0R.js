import{r as c,j as e,Y as q,a as z,y as G,b as H}from"./app-CbGniuGg.js";import{A as J}from"./AdminAuthenticated-WVtzv5Zn.js";import{P as w}from"./PermissionAllow-1mTxAVHB.js";import{T as E}from"./Tab-DWQL0Yve.js";import{T as X}from"./Tabs-jZRwfbPz.js";import{M as Z}from"./ModalPopup-YWYoAlrM.js";import ee from"./ViewSeller-V-bJZRZs.js";import{d as l}from"./index-BqYicDci.js";/* empty css                                  */import{S as se}from"./sweetalert2.all-DpSS_iS7.js";import{P as te}from"./Pagination-sCYlv00A.js";import"./Dropdown-Bm2E0XbY.js";import"./AdminHeader-DnnSXMq6.js";import"./Dropdown-gBftdBms.js";import"./useMergedRefs-CvNFD8ox.js";import"./useWindow-Bj8kjtxf.js";import"./NavbarContext-DrdPEPWC.js";import"./extends-CCbyfPlC.js";import"./objectWithoutPropertiesLoose-DXrfETLX.js";import"./index-Cv2Gd-Mb.js";import"./BootstrapModalManager-B1FWv7nr.js";import"./Fade-e7Qmv1hK.js";import"./inheritsLoose-1HkgTRWY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./index-CRtbDjZt.js";import"./ToastNotification-DOArGPLg.js";import"./ReactToastify-DdlTSVEH.js";import"./TabPane-HSXGxD0e.js";import"./ElementChildren-BNW1OptW.js";import"./Modal-Bah1x5zm.js";import"./slick-theme-DZpC5mF7.js";import"./StatusBtn-yGUVS5Hs.js";import"./DynamicSelect-Cics2XOn.js";import"./react-select.esm-be3JHbsv.js";import"./Select-49a62830.esm-CuRfzxJr.js";import"./objectSpread2-fZMFotU9.js";import"./defineProperty-C77ibxUe.js";import"./extends-CJoT7KlQ.js";import"./emotion-react.browser.esm-CAMIwgSj.js";import"./hoist-non-react-statics.cjs-BE_11Hqa.js";import"./interopRequireDefault-BbjLfwJi.js";import"./objectWithoutPropertiesLoose-DN910g8V.js";function Oe({vendorsList:r,pendingVendorsList:x,suspendedVendorsList:f,auth:S}){const[u,g]=c.useState(1),[j,N]=c.useState(""),[C,y]=c.useState("all"),[a,b]=c.useState(r.data),[R,U]=c.useState(x.data),[V,B]=c.useState(f.data),[n,Y]=c.useState("ApprovedSellers"),[$,T]=c.useState(!1),[M,O]=c.useState(null),P=o=>{se.fire({title:"Are you sure you want to delete the User?",text:" Once deleted, it cannot be recovered.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&G.delete(route("admin.sellers.destroy",o.id))})},v=(o,s)=>{g(s),window.scrollTo(0,0)},_=o=>{const s=o.target.value;N(s);let i;n==="ApprovedSellers"?(i=r.data.filter(t=>{var d,m,h,p;return((d=t.company_name)==null?void 0:d.toLowerCase().includes(s.toLowerCase()))||((m=t.full_name)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))||((h=t.email)==null?void 0:h.toLowerCase().includes(s.toLowerCase()))||((p=t.phone)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))}),b(i)):n==="PendingApproval"?(i=x.data.filter(t=>{var d,m,h,p;return((d=t.company_name)==null?void 0:d.toLowerCase().includes(s.toLowerCase()))||((m=t.full_name)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))||((h=t.email)==null?void 0:h.toLowerCase().includes(s.toLowerCase()))||((p=t.phone)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))}),U(i)):n==="SuspendedSellers"&&(i=f.data.filter(t=>{var d,m,h,p;return((d=t.company_name)==null?void 0:d.toLowerCase().includes(s.toLowerCase()))||((m=t.full_name)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))||((h=t.email)==null?void 0:h.toLowerCase().includes(s.toLowerCase()))||((p=t.phone)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))}),B(i)),g(1)},A=o=>{const s=o.target.value;y(s);let i;n==="ApprovedSellers"?(s=="agent"?i=r.data.filter(t=>t.is_agent===!0):s=="individual"?i=r.data.filter(t=>t.is_agent==!1):i=r.data,b(i)):n==="PendingApproval"?(s=="agent"?i=r.data.filter(t=>t.is_agent==!0):s=="individual"?i=r.data.filter(t=>t.is_agent==!1):i=r.data,U(i)):n==="SuspendedSellers"&&(s=="agent"?i=r.data.filter(t=>t.is_agent==!0):s=="individual"?i=r.data.filter(t=>t.is_agent==!1):i=r.data,B(i)),g(1)},L=(()=>{if(j.length>0||C.length>0){if(n==="ApprovedSellers")return a;if(n==="PendingApproval")return R;if(n==="SuspendedSellers")return V}else{if(n==="ApprovedSellers")return r.data;if(n==="PendingApproval")return x.data;if(n==="SuspendedSellers")return f.data}})(),F=(u-1)*20,k=u*20,Q=()=>T(!1),D=async o=>{try{const i=(await H.get(route("admin.sellers.show",o.id))).data;O(i),T(!0)}catch(s){console.error("Error fetching data",s)}},W=()=>{T(!1)};return e.jsxs(J,{user:S.user,children:[e.jsx(q,{title:"Users List"}),e.jsx("div",{className:"content-wrapper me-4",children:e.jsxs("div",{className:"container-full",children:[e.jsx("div",{className:"content-header",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("div",{className:"me-auto",children:e.jsx("h4",{className:"page-title",children:"Users Listing"})})})}),e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"text-end",children:e.jsx(w,{permission:"Seller Create",children:e.jsxs(z,{className:"btn btn-info text-end",href:route("admin.sellers.create"),children:[e.jsx("i",{className:"bi bi-plus"})," Create"]})})})})]})}),e.jsxs(X,{id:"uncontrolled-tab-example",activeKey:n,onSelect:o=>Y(o),className:"",children:[e.jsx(E,{eventKey:"ApprovedSellers",title:"Active Users",children:e.jsx(I,{displayList:L,startIdx:F,endIdx:k,deleteVendor:P,handlePageChange:v,currentPage:u,itemsPerPage:20,handleShow:D,searchQuery:j,handleSearch:_,handleSearchType:A})}),e.jsx(E,{eventKey:"SuspendedSellers",title:"Suspended",children:e.jsx(I,{displayList:L,startIdx:F,endIdx:k,deleteVendor:P,handlePageChange:v,currentPage:u,itemsPerPage:20,handleShow:D,searchQuery:j,handleSearch:_,handleSearchType:A})}),e.jsx(E,{eventKey:"PendingApproval",title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Unverified"}),x.data.length>0&&e.jsx("span",{className:"pending-approval-count",children:x.data.length})]}),children:e.jsx(I,{displayList:L,startIdx:F,endIdx:k,deleteVendor:P,handlePageChange:v,currentPage:u,itemsPerPage:20,handleShow:D,searchQuery:j,handleSearch:_,handleSearchType:A})})]})]})}),e.jsx(Z,{show:$,handleClose:Q,size:"md",title:"Seller Details",children:M?e.jsx(ee,{collection:M,handleClose:Q,onSubmit:W}):"Failed fetching data..."})]})}const I=({displayList:r,startIdx:x,endIdx:f,deleteVendor:S,handlePageChange:K,currentPage:u,itemsPerPage:g,handleShow:j,searchQuery:N,handleSearch:C,handleSearchType:y})=>e.jsx("section",{className:"content2",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"box",children:e.jsx("div",{className:"box-body",children:e.jsxs(w,{permission:"Categories Listing",message:"true",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"mb-3 col-lg-4",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name,company name,phone or email",value:N,onChange:C})}),e.jsx("div",{className:"mb-3 col-lg-2",children:e.jsxs("select",{name:"type",className:"form-control select-option",style:{WebkitAppearance:"auto !important"},onChange:y,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"agent",children:"Agent"}),e.jsx("option",{value:"individual",children:"Individual users"})]})})]}),e.jsx("div",{className:"table-responsive rounded card-table",children:r.length>0?e.jsx(e.Fragment,{children:e.jsxs(l.Table,{className:"table border-no",id:"example1",children:[e.jsx(l.Thead,{children:e.jsxs(l.Tr,{children:[e.jsx(l.Th,{children:"Full Name"}),e.jsx(l.Th,{children:"Email"}),e.jsx(l.Th,{children:"Mobile Number"}),e.jsx(l.Th,{children:"Designation"}),e.jsx(l.Th,{children:"Subscription"}),e.jsx(l.Th,{children:"Ads"}),e.jsx(l.Th,{children:"Started at"}),e.jsx(l.Th,{children:"Last login"}),e.jsx(l.Th,{className:"text-end"})]})}),e.jsx(l.Tbody,{children:r.slice(x,f).map(a=>{var b;return e.jsxs(l.Tr,{className:"hover-primary",children:[e.jsxs(l.Td,{role:"button",valign:"middle",className:"d-flex",onClick:()=>j(a),children:[e.jsxs("div",{className:"avatar-userlisting position-relative",style:{height:"60px",width:"60px"},children:[e.jsx("span",{className:"d-block",style:{backgroundImage:`url(${a.picture})`,backgroundSize:"cover",backgroundPosition:"center",height:"60px",width:"60px",borderRadius:"50%"}}),e.jsx("span",{className:`position-absolute ${a.is_agent?"bg-dropbox":"bg-success"} text-white d-flex justify-content-center align-items-center`,style:{bottom:"0",right:"0",borderRadius:"50%",width:"20px",height:"20px",fontSize:"12px"},children:a.is_agent?"A":"I"})]}),e.jsxs("div",{className:"ms-20",children:[a.is_agent&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-bold text-uppercase",children:a.company_name}),e.jsx("br",{})]}),e.jsx("span",{children:a.full_name})]})]}),e.jsx(l.Td,{valign:"middle",children:a.email}),e.jsx(l.Td,{valign:"middle",children:a.phone}),e.jsx(l.Td,{valign:"middle",children:a.designation}),e.jsx(l.Td,{children:(b=a.current_subscription)==null?void 0:b.name}),e.jsx(l.Td,{children:a.ads.length}),e.jsxs(l.Td,{children:[window.formatDate(a.created_at),e.jsx("br",{}),window.formatTime(a.created_at)]}),e.jsxs(l.Td,{children:[" ",a.last_login!=null&&e.jsxs(e.Fragment,{children:[window.formatDate(a.last_login)," ",e.jsx("br",{}),window.formatTime(a.last_login)]})]}),e.jsxs(l.Td,{className:"text-end",children:[e.jsx(w,{permission:"Seller Show",children:e.jsx("span",{onClick:()=>j(a),className:"btn btn-transparent",children:e.jsx("i",{className:"bi bi-eye"})})}),e.jsx(w,{permission:"Seller Edit",children:e.jsx(z,{className:"btn btn-transparent",href:route("admin.sellers.edit",a.id),children:e.jsx("i",{className:"bi bi-pencil"})})}),e.jsx(w,{permission:"Seller Edit",children:e.jsx("button",{onClick:()=>S(a),className:"btn btn-transparent border-0",children:e.jsx("i",{className:"bi bi-trash"})})})]})]},a.id)})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-100 text-center",children:e.jsx("h5",{children:"No users found!"})})})}),r.length>g&&e.jsx("div",{className:"pagination-container float-end py-5",children:e.jsx(te,{count:Math.ceil(r.length/g),page:u,onChange:K})})]})})})})})});export{Oe as default};
