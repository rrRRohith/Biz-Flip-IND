import{r as d,j as e,Y as G,a as V,y as H,b as J}from"./app-CobPyd18.js";import{A as W}from"./AdminAuthenticated-Don73ulg.js";import{P as b}from"./PermissionAllow-CmlOMkMe.js";import{T as D}from"./Tab-BNYtssLs.js";import{T as X}from"./Tabs-BlE5KdR_.js";import{M as Z}from"./ModalPopup-SF3u7hFL.js";import ee from"./ViewSeller-DXAm-sMO.js";import{d as t}from"./index-BrDoJHxO.js";/* empty css                                  */import{S as se}from"./sweetalert2.all-OkLwcdBE.js";import{P as ae}from"./Pagination-5LN8oeQr.js";import"./Dropdown-CIO57Urq.js";import"./AdminHeader-0mcc-Scu.js";import"./Dropdown-C4hHOVD2.js";import"./listen-Bo0XtDcF.js";import"./useWindow-Cqpcy-bV.js";import"./Anchor-Uyz1zfo1.js";import"./extends-CCbyfPlC.js";import"./objectWithoutPropertiesLoose-DXrfETLX.js";import"./index-DYPlaXDl.js";import"./BootstrapModalManager-Bph2DfSH.js";import"./Fade-aLtBzS4U.js";import"./inheritsLoose-1HkgTRWY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./index-DpUCgYSw.js";import"./ToastNotification-Beze3JbS.js";import"./ReactToastify-Co8ZKHOv.js";import"./TabPane-CP35VGCQ.js";import"./ElementChildren-BkcL8DNw.js";import"./Modal-CF1Y8_z5.js";import"./slick-theme-C8z80wiS.js";import"./StatusBtn-D8tQhA5U.js";import"./DynamicSelect-Bx__cY9a.js";import"./react-select.esm-Uq5GB7go.js";import"./Select-49a62830.esm-CC2Xw2cx.js";import"./objectSpread2-fZMFotU9.js";import"./defineProperty-C77ibxUe.js";import"./extends-CJoT7KlQ.js";import"./emotion-react.browser.esm-DemBilAk.js";import"./hoist-non-react-statics.cjs-DmkQGy_T.js";import"./interopRequireDefault-BbjLfwJi.js";import"./objectWithoutPropertiesLoose-DN910g8V.js";function $e({vendorsList:r,pendingVendorsList:u,suspendedVendorsList:g,auth:C}){const[j,f]=d.useState(1),[o,w]=d.useState(""),[N,y]=d.useState("all"),[i,S]=d.useState(r.data),[Y,I]=d.useState(u.data),[z,M]=d.useState(g.data),[n,O]=d.useState("ApprovedSellers"),[R,T]=d.useState(!1),[Q,$]=d.useState(null),P=c=>{se.fire({title:"Are you sure you want to delete the Seller?",text:" Once deleted, it cannot be recovered.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&H.delete(route("admin.sellers.destroy",c.id))})},v=(c,s)=>{f(s),window.scrollTo(0,0)},A=c=>{const s=c.target.value;w(s);let l;n==="ApprovedSellers"?(l=r.data.filter(a=>{var m,p,h,x;return((m=a.company_name)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))||((p=a.full_name)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))||((h=a.email)==null?void 0:h.toLowerCase().includes(s.toLowerCase()))||((x=a.phone)==null?void 0:x.toLowerCase().includes(s.toLowerCase()))}),S(l)):n==="PendingApproval"?(l=u.data.filter(a=>{var m,p,h,x;return((m=a.company_name)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))||((p=a.full_name)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))||((h=a.email)==null?void 0:h.toLowerCase().includes(s.toLowerCase()))||((x=a.phone)==null?void 0:x.toLowerCase().includes(s.toLowerCase()))}),I(l)):n==="SuspendedSellers"&&(l=g.data.filter(a=>{var m,p,h,x;return((m=a.company_name)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))||((p=a.full_name)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))||((h=a.email)==null?void 0:h.toLowerCase().includes(s.toLowerCase()))||((x=a.phone)==null?void 0:x.toLowerCase().includes(s.toLowerCase()))}),M(l)),f(1)},_=c=>{const s=c.target.value;y(s);let l;n==="ApprovedSellers"?(s=="agent"?l=r.data.filter(a=>a.is_agent===!0):s=="individual"?l=r.data.filter(a=>a.is_agent==!1):l=r.data,S(l)):n==="PendingApproval"?(s=="agent"?l=r.data.filter(a=>a.is_agent==!0):s=="individual"?l=r.data.filter(a=>a.is_agent==!1):l=r.data,I(l)):n==="SuspendedSellers"&&(s=="agent"?l=r.data.filter(a=>a.is_agent==!0):s=="individual"?l=r.data.filter(a=>a.is_agent==!1):l=r.data,M(l)),f(1)},L=(()=>{if(o.length>0||N.length>0){if(n==="ApprovedSellers")return i;if(n==="PendingApproval")return Y;if(n==="SuspendedSellers")return z}else{if(n==="ApprovedSellers")return r.data;if(n==="PendingApproval")return u.data;if(n==="SuspendedSellers")return g.data}})(),k=(j-1)*20,E=j*20,U=()=>T(!1),F=async c=>{try{const l=(await J.get(route("admin.sellers.show",c.id))).data;$(l),T(!0)}catch(s){console.error("Error fetching data",s)}},q=()=>{T(!1)};return e.jsxs(W,{user:C.user,children:[e.jsx(G,{title:"Users List"}),e.jsx("div",{className:"content-wrapper me-4",children:e.jsxs("div",{className:"container-full",children:[e.jsx("div",{className:"content-header",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("div",{className:"me-auto",children:e.jsx("h4",{className:"page-title",children:"Users Listing"})})})}),e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"text-end",children:e.jsx(b,{permission:"Seller Create",children:e.jsxs(V,{className:"btn btn-info text-end",href:route("admin.sellers.create"),children:[e.jsx("i",{className:"bi bi-plus"})," Create"]})})})})]})}),e.jsxs(X,{id:"uncontrolled-tab-example",activeKey:n,onSelect:c=>O(c),className:"",children:[e.jsx(D,{eventKey:"ApprovedSellers",title:"Active Users",children:e.jsx(K,{displayList:L,startIdx:k,endIdx:E,deleteVendor:P,handlePageChange:v,currentPage:j,itemsPerPage:20,handleShow:F,searchQuery:o,handleSearch:A,handleSearchType:_})}),e.jsx(D,{eventKey:"SuspendedSellers",title:"Suspended",children:e.jsx(K,{displayList:L,startIdx:k,endIdx:E,deleteVendor:P,handlePageChange:v,currentPage:j,itemsPerPage:20,handleShow:F,searchQuery:o,handleSearch:A,handleSearchType:_})}),e.jsx(D,{eventKey:"PendingApproval",title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Unverified"}),u.data.length>0&&e.jsx("span",{className:"pending-approval-count",children:u.data.length})]}),children:e.jsx(K,{displayList:L,startIdx:k,endIdx:E,deleteVendor:P,handlePageChange:v,currentPage:j,itemsPerPage:20,handleShow:F,searchQuery:o,handleSearch:A,handleSearchType:_})})]})]})}),e.jsx(Z,{show:R,handleClose:U,size:"md",title:"Seller Details",children:Q?e.jsx(ee,{collection:Q,handleClose:U,onSubmit:q}):"Failed fetching data..."})]})}const K=({displayList:r,startIdx:u,endIdx:g,deleteVendor:C,handlePageChange:B,currentPage:j,itemsPerPage:f,handleShow:o,searchQuery:w,handleSearch:N,handleSearchType:y})=>e.jsx("section",{className:"content2",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"box",children:e.jsx("div",{className:"box-body",children:e.jsxs(b,{permission:"Categories Listing",message:"true",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"mb-3 col-lg-4",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name,company name,phone or email",value:w,onChange:N})}),e.jsx("div",{className:"mb-3 col-lg-2",children:e.jsxs("select",{name:"",className:"form-control",onChange:y,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"agent",children:"Agent"}),e.jsx("option",{value:"individual",children:"Individual"})]})})]}),e.jsx("div",{className:"table-responsive rounded card-table",children:e.jsxs(t.Table,{className:"table border-no",id:"example1",children:[e.jsx(t.Thead,{children:e.jsxs(t.Tr,{children:[e.jsx(t.Th,{children:"Full Name"}),e.jsx(t.Th,{children:"Email"}),e.jsx(t.Th,{children:"Mobile Number"}),e.jsx(t.Th,{children:"Designation"}),e.jsx(t.Th,{children:"Subscription"}),e.jsx(t.Th,{children:"Ads"}),e.jsx(t.Th,{children:"Started at"}),e.jsx(t.Th,{children:"Last login"}),e.jsx(t.Th,{className:"text-end"})]})}),e.jsx(t.Tbody,{children:r.slice(u,g).map(i=>e.jsxs(t.Tr,{className:"hover-primary",children:[e.jsxs(t.Td,{valign:"middle",className:"d-flex",onClick:()=>o(i),children:[e.jsx("img",{src:i.picture,className:"w-30 h-30 me-3 rounded-circle",alt:`${i.picture} icon`,onError:S=>{S.target.onerror=null,S.target.src="/assets/admin/images/noimage.webp"}}),e.jsxs("div",{children:[i.company_name!=""&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-fw-bold",children:i.company_name}),e.jsx("br",{})]}),e.jsx("i",{children:i.full_name})]})]}),e.jsx(t.Td,{onClick:()=>o(i),valign:"middle",children:i.email}),e.jsx(t.Td,{onClick:()=>o(i),valign:"middle",children:i.phone}),e.jsx(t.Td,{onClick:()=>o(i),valign:"middle",children:i.designation}),e.jsx(t.Td,{}),e.jsx(t.Td,{}),e.jsx(t.Td,{}),e.jsx(t.Td,{}),e.jsxs(t.Td,{className:"text-end",children:[e.jsx(b,{permission:"Seller Show",children:e.jsx("span",{onClick:()=>o(i),className:"btn btn-transparent",children:e.jsx("i",{className:"bi bi-eye"})})}),e.jsx(b,{permission:"Seller Edit",children:e.jsx(V,{className:"btn btn-transparent",href:route("admin.sellers.edit",i.id),children:e.jsx("i",{className:"bi bi-pencil"})})}),e.jsx(b,{permission:"Seller Edit",children:e.jsx("button",{onClick:()=>C(i),className:"btn btn-transparent border-0",children:e.jsx("i",{className:"bi bi-trash"})})})]})]},i.id))})]})}),r.length>f&&e.jsx("div",{className:"pagination-container float-end py-5",children:e.jsx(ae,{count:Math.ceil(r.length/f),page:j,onChange:B})})]})})})})})});export{$e as default};
